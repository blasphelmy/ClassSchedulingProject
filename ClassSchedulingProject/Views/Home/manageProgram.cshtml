@model UserInformation
@{
    ProgramOfferings _f = null;
    List<CourseOfferingsTemplates> courses = new List<CourseOfferingsTemplates>();
}

<div style="padding-left: 20px; overflow:hidden; max-width: 100%;">
    <select id="programID" style="margin-bottom: 10px" onchange="manageProgram.fetchEventTemplates(this)">
        @foreach (ProgramOfferings program in Model.Department.ProgramOfferings)
        {
            @if(_f == null) {
                _f = program;
                courses = _f.CourseOfferingsTemplates.ToList();
                courses.Sort((a, b) => a.QuarterNumber.CompareTo(b.QuarterNumber));
            }
            <option value="@program.Id">@program.ProgramName</option>
        }
        <option value="addNewProgram">Add a New Program</option>
    </select>
    @if(courses != null){
        <table class="table table-responsive">
            <thead>
                <tr>
                    <th>Quarter</th>
                    <th>Course Prefix</th>
                    <th>Course Number</th>
                    <th>Title</th>
                    <th>Component</th>
                    <th>Credits</th>
                </tr>
            </thead>
            <tbody id="mangeProgramTableBody">
                @foreach(CourseOfferingsTemplates course in courses){
                <tr id="tableRow-@course.Id">
                    <td><input data="QuarterNumber" type="number" min="1" max="8" value="@course.QuarterNumber"></td>
                    <td><select data="CoursePrefix">
                        <option value="@course.CoursePrefix">@course.CoursePrefix</option>
                        @foreach(ValidPrefixes prefix in Model.Department.ValidPrefixes){
                            <option value="@prefix.Prefix">@prefix.Prefix</option>
                        }
                    </select></td>
                    <td><input data="CourseNumber" type="text" value="@course.CourseNumber"></td>
                    <td><input data="Title" type="text" value="@course.Title"></td>
                    <td><select data="Component">
                        <option value="@course.Component">@course.Component</option>
                        <option value="Lecture">Lecture</option>
                        <option value="Lab">Lab</option>
                        <option value="Ind Study"></option>
                    </select></td>
                    <td><input data="CourseCredits" type="text" value="@course.Credits"></td>
                    <td><a id="@course.Id" href="#" onclick="manageProgram.save('tableRow-@course.Id')">Save</a></td> 
                    <td><a href="#" class="text-danger" onclick="manageProgram.delete('@course.Id')">Delete</a></td>
                </tr>
                }
                <tr id="tableRow-NEW">
                    <td><input data="QuarterNumber" type="number" min="1" max="8" placeholder="1"></td>
                    <td><select data="CoursePrefix">
                        <@foreach(ValidPrefixes prefix in Model.Department.ValidPrefixes){
                            <option value="@prefix.Prefix">@prefix.Prefix</option>
                        }>
                    </select></td>
                    <td><input data="CourseNumber" type="number" placeholder="226"></td>
                    <td><input data="Title" type="text" placeholder="Computer Programming IV"></td>
                    <td><select data="Component">
                        <option value="Lecture">Lecture</option>
                        <option value="Lab">Lab</option>
                        <option value="Ind Study"></option>
                    </select></td>
                    <td><input data="CourseCredits" type="text" placeholder="5"></td>
                    <td><a id="NULL" href="#" onclick="manageProgram.save('tableRow-NEW')">Save</a></td> 
                </tr>
            </tbody>
        </table>
    }
</div>
<script src="/lib/jquery/dist/jquery.min.js"></script>
<script src="/js/manageProgram.js"></script>
<script>
    window.onload = function(){
    if(!localStorage.getItem("programID")) localStorage.setItem("programID", document.getElementById("programID").value);
    document.getElementById("programID").value = localStorage.getItem("programID");
    manageProgram.fetchEventTemplates(document.getElementById("programID"))
}
</script>